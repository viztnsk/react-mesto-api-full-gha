{"ast":null,"code":"class Api {\n  constructor(_ref) {\n    let {\n      url,\n      ...headers\n    } = _ref;\n    this._url = url;\n    this._headers = headers;\n  }\n  async _fetch(path) {\n    let method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GET';\n    let body = arguments.length > 2 ? arguments[2] : undefined;\n    const opt = {\n      ...this._headers,\n      method\n    };\n    if (body) {\n      if (typeof body === 'string') {\n        opt.body = body;\n      } else {\n        opt.body = JSON.stringify(body);\n      }\n    }\n    const res = await fetch(this._url + path, opt);\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${JSON.message}`);\n    }\n  }\n  getCards() {\n    return this._fetch('/cards', \"GET\");\n  }\n  getUser() {\n    return this._fetch('/users/me', \"GET\");\n  }\n  patchUser(values) {\n    return this._fetch('/users/me', 'PATCH', values);\n  }\n  setAvatar(avatar) {\n    return this._fetch('/users/me/avatar', 'PATCH', avatar);\n  }\n  addCard(_ref2) {\n    let {\n      name,\n      link\n    } = _ref2;\n    return this._fetch('/cards', \"POST\", {\n      name,\n      link\n    });\n  }\n  deleteCard(card) {\n    return this._fetch(`/cards/${card._id}`, \"DELETE\");\n  }\n  setLike(card) {\n    return this._fetch(`/cards/${card._id}/likes`, \"PUT\");\n  }\n  removeLike(card) {\n    return this._fetch(`/cards/${card._id}/likes`, \"DELETE\");\n  }\n  changeLikeCardStatus(cardId, isLiked) {\n    if (isLiked) {\n      return this._fetch(`/cards/${cardId}/likes`, \"PUT\");\n    } else {\n      return this._fetch(`/cards/${cardId}/likes`, \"DELETE\");\n    }\n  }\n}\nconst api = new Api({\n  url: 'http://localhost:3001',\n  headers: {\n    authorization: 'e8a4f0e7-1d5e-411a-bb18-94fb266d4955',\n    'Content-Type': 'application/json'\n  }\n});\nexport default api;","map":{"version":3,"names":["Api","constructor","url","headers","_url","_headers","_fetch","path","method","body","opt","JSON","stringify","res","fetch","ok","json","Promise","reject","message","getCards","getUser","patchUser","values","setAvatar","avatar","addCard","name","link","deleteCard","card","_id","setLike","removeLike","changeLikeCardStatus","cardId","isLiked","api","authorization"],"sources":["/Users/user/Desktop/react-mesto-api-full-gha/frontend/src/utils/Api.js"],"sourcesContent":["class Api {\n  constructor({url, ...headers}) {\n    this._url = url;\n    this._headers = headers;\n  }\n\n  async _fetch(path, method='GET', body) {\n    const opt = { ...this._headers, method };\n    if (body) {\n      if (typeof body === 'string') {\n        opt.body = body; \n      }\n      else {\n        opt.body = JSON.stringify(body);\n      }\n    }\n    const res = await fetch(this._url + path, opt)\n    if(res.ok) {\n      return res.json()\n    }\n    else {\n      return Promise.reject(`Ошибка: ${JSON.message}`)\n    }\n  }\n    getCards() {\n      return this._fetch('/cards', \"GET\");\n    }\n    getUser() {\n      return this._fetch('/users/me', \"GET\");\n    }\n    patchUser(values) {\n      return this._fetch('/users/me', 'PATCH', values)\n    }\n    setAvatar(avatar) {\n      return this._fetch('/users/me/avatar', 'PATCH', avatar)\n    }\n    addCard({name, link}) {\n      return this._fetch('/cards', \"POST\", {name, link})\n    }\n    deleteCard(card) {\n      return this._fetch(`/cards/${card._id}`, \"DELETE\")\n    }\n    setLike(card) {\n      return this._fetch(`/cards/${card._id}/likes`, \"PUT\")\n    }\n    removeLike(card) {\n      return this._fetch(`/cards/${card._id}/likes`, \"DELETE\")\n    }\n    changeLikeCardStatus(cardId, isLiked) {\n      if (isLiked) {\n        return this._fetch(`/cards/${cardId}/likes`, \"PUT\")\n      }\n      else {\n        return this._fetch(`/cards/${cardId}/likes`, \"DELETE\")\n      }\n    }\n  }\nconst api = new Api ({\n    url: 'http://localhost:3001',\n    headers: {\n      authorization: 'e8a4f0e7-1d5e-411a-bb18-94fb266d4955',\n      'Content-Type': 'application/json'\n    }\n  })\n  export default api"],"mappings":"AAAA,MAAMA,GAAG,CAAC;EACRC,WAAW,OAAoB;IAAA,IAAnB;MAACC,GAAG;MAAE,GAAGC;IAAO,CAAC;IAC3B,IAAI,CAACC,IAAI,GAAGF,GAAG;IACf,IAAI,CAACG,QAAQ,GAAGF,OAAO;EACzB;EAEA,MAAMG,MAAM,CAACC,IAAI,EAAsB;IAAA,IAApBC,MAAM,uEAAC,KAAK;IAAA,IAAEC,IAAI;IACnC,MAAMC,GAAG,GAAG;MAAE,GAAG,IAAI,CAACL,QAAQ;MAAEG;IAAO,CAAC;IACxC,IAAIC,IAAI,EAAE;MACR,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;QAC5BC,GAAG,CAACD,IAAI,GAAGA,IAAI;MACjB,CAAC,MACI;QACHC,GAAG,CAACD,IAAI,GAAGE,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC;MACjC;IACF;IACA,MAAMI,GAAG,GAAG,MAAMC,KAAK,CAAC,IAAI,CAACV,IAAI,GAAGG,IAAI,EAAEG,GAAG,CAAC;IAC9C,IAAGG,GAAG,CAACE,EAAE,EAAE;MACT,OAAOF,GAAG,CAACG,IAAI,EAAE;IACnB,CAAC,MACI;MACH,OAAOC,OAAO,CAACC,MAAM,CAAE,WAAUP,IAAI,CAACQ,OAAQ,EAAC,CAAC;IAClD;EACF;EACEC,QAAQ,GAAG;IACT,OAAO,IAAI,CAACd,MAAM,CAAC,QAAQ,EAAE,KAAK,CAAC;EACrC;EACAe,OAAO,GAAG;IACR,OAAO,IAAI,CAACf,MAAM,CAAC,WAAW,EAAE,KAAK,CAAC;EACxC;EACAgB,SAAS,CAACC,MAAM,EAAE;IAChB,OAAO,IAAI,CAACjB,MAAM,CAAC,WAAW,EAAE,OAAO,EAAEiB,MAAM,CAAC;EAClD;EACAC,SAAS,CAACC,MAAM,EAAE;IAChB,OAAO,IAAI,CAACnB,MAAM,CAAC,kBAAkB,EAAE,OAAO,EAAEmB,MAAM,CAAC;EACzD;EACAC,OAAO,QAAe;IAAA,IAAd;MAACC,IAAI;MAAEC;IAAI,CAAC;IAClB,OAAO,IAAI,CAACtB,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE;MAACqB,IAAI;MAAEC;IAAI,CAAC,CAAC;EACpD;EACAC,UAAU,CAACC,IAAI,EAAE;IACf,OAAO,IAAI,CAACxB,MAAM,CAAE,UAASwB,IAAI,CAACC,GAAI,EAAC,EAAE,QAAQ,CAAC;EACpD;EACAC,OAAO,CAACF,IAAI,EAAE;IACZ,OAAO,IAAI,CAACxB,MAAM,CAAE,UAASwB,IAAI,CAACC,GAAI,QAAO,EAAE,KAAK,CAAC;EACvD;EACAE,UAAU,CAACH,IAAI,EAAE;IACf,OAAO,IAAI,CAACxB,MAAM,CAAE,UAASwB,IAAI,CAACC,GAAI,QAAO,EAAE,QAAQ,CAAC;EAC1D;EACAG,oBAAoB,CAACC,MAAM,EAAEC,OAAO,EAAE;IACpC,IAAIA,OAAO,EAAE;MACX,OAAO,IAAI,CAAC9B,MAAM,CAAE,UAAS6B,MAAO,QAAO,EAAE,KAAK,CAAC;IACrD,CAAC,MACI;MACH,OAAO,IAAI,CAAC7B,MAAM,CAAE,UAAS6B,MAAO,QAAO,EAAE,QAAQ,CAAC;IACxD;EACF;AACF;AACF,MAAME,GAAG,GAAG,IAAIrC,GAAG,CAAE;EACjBE,GAAG,EAAE,uBAAuB;EAC5BC,OAAO,EAAE;IACPmC,aAAa,EAAE,sCAAsC;IACrD,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;AACF,eAAeD,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}