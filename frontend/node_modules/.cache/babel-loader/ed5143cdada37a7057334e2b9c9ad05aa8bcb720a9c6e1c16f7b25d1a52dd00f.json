{"ast":null,"code":"import _regeneratorRuntime from\"/Users/user/Desktop/react-auth/mesto-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/user/Desktop/react-auth/mesto-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/user/Desktop/react-auth/mesto-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectWithoutProperties from\"/Users/user/Desktop/react-auth/mesto-react/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _classCallCheck from\"/Users/user/Desktop/react-auth/mesto-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/user/Desktop/react-auth/mesto-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";var _excluded=[\"url\"];var Api=/*#__PURE__*/function(){function Api(_ref){var url=_ref.url,headers=_objectWithoutProperties(_ref,_excluded);_classCallCheck(this,Api);this._url=url;this._headers=headers;}_createClass(Api,[{key:\"_fetch\",value:function(){var _fetch2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(path){var method,body,opt,res,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:'GET';body=_args.length>2?_args[2]:undefined;opt=_objectSpread(_objectSpread({},this._headers),{},{method:method});if(body){if(typeof body==='string'){opt.body=body;}else{opt.body=JSON.stringify(body);}}_context.next=6;return fetch(this._url+path,opt);case 6:res=_context.sent;if(!res.ok){_context.next=11;break;}return _context.abrupt(\"return\",res.json());case 11:return _context.abrupt(\"return\",Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(JSON.message)));case 12:case\"end\":return _context.stop();}}},_callee,this);}));function _fetch(_x){return _fetch2.apply(this,arguments);}return _fetch;}()},{key:\"getCards\",value:function getCards(){return this._fetch('/cards',\"GET\");}},{key:\"getUser\",value:function getUser(){return this._fetch('/users/me',\"GET\");}},{key:\"patchUser\",value:function patchUser(values){return this._fetch('/users/me','PATCH',values);}},{key:\"setAvatar\",value:function setAvatar(avatar){return this._fetch('/users/me/avatar','PATCH',avatar);}},{key:\"addCard\",value:function addCard(_ref2){var name=_ref2.name,link=_ref2.link;return this._fetch('/cards',\"POST\",{name:name,link:link});}},{key:\"deleteCard\",value:function deleteCard(card){return this._fetch(\"/cards/\".concat(card._id),\"DELETE\");}},{key:\"setLike\",value:function setLike(card){return this._fetch(\"/cards/\".concat(card._id,\"/likes\"),\"PUT\");}},{key:\"removeLike\",value:function removeLike(card){return this._fetch(\"/cards/\".concat(card._id,\"/likes\"),\"DELETE\");}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isLiked){if(isLiked){return this._fetch(\"/cards/\".concat(cardId,\"/likes\"),\"PUT\");}else{return this._fetch(\"/cards/\".concat(cardId,\"/likes\"),\"DELETE\");}}}]);return Api;}();var api=new Api({url:'https://mesto.nomoreparties.co/v1/cohort-52',headers:{authorization:'e8a4f0e7-1d5e-411a-bb18-94fb266d4955','Content-Type':'application/json'}});export default api;","map":{"version":3,"names":["Api","url","headers","_url","_headers","path","method","body","opt","JSON","stringify","fetch","res","ok","json","Promise","reject","message","_fetch","values","avatar","name","link","card","_id","cardId","isLiked","api","authorization"],"sources":["/Users/user/Desktop/react-auth/mesto-react/src/utils/Api.js"],"sourcesContent":["class Api {\n  constructor({url, ...headers}) {\n    this._url = url;\n    this._headers = headers;\n  }\n\n  async _fetch(path, method='GET', body) {\n    const opt = { ...this._headers, method };\n    if (body) {\n      if (typeof body === 'string') {\n        opt.body = body; \n      }\n      else {\n        opt.body = JSON.stringify(body);\n      }\n    }\n    const res = await fetch(this._url + path, opt)\n    if(res.ok) {\n      return res.json()\n    }\n    else {\n      return Promise.reject(`Ошибка: ${JSON.message}`)\n    }\n  }\n    getCards() {\n      return this._fetch('/cards', \"GET\");\n    }\n    getUser() {\n      return this._fetch('/users/me', \"GET\");\n    }\n    patchUser(values) {\n      return this._fetch('/users/me', 'PATCH', values)\n    }\n    setAvatar(avatar) {\n      return this._fetch('/users/me/avatar', 'PATCH', avatar)\n    }\n    addCard({name, link}) {\n      return this._fetch('/cards', \"POST\", {name, link})\n    }\n    deleteCard(card) {\n      return this._fetch(`/cards/${card._id}`, \"DELETE\")\n    }\n    setLike(card) {\n      return this._fetch(`/cards/${card._id}/likes`, \"PUT\")\n    }\n    removeLike(card) {\n      return this._fetch(`/cards/${card._id}/likes`, \"DELETE\")\n    }\n    changeLikeCardStatus(cardId, isLiked) {\n      if (isLiked) {\n        return this._fetch(`/cards/${cardId}/likes`, \"PUT\")\n      }\n      else {\n        return this._fetch(`/cards/${cardId}/likes`, \"DELETE\")\n      }\n    }\n  }\nconst api = new Api ({\n    url: 'https://mesto.nomoreparties.co/v1/cohort-52',\n    headers: {\n      authorization: 'e8a4f0e7-1d5e-411a-bb18-94fb266d4955',\n      'Content-Type': 'application/json'\n    }\n  })\n  export default api"],"mappings":"0zBAAMA,IAAG,yBACP,kBAA+B,IAAlBC,IAAG,MAAHA,GAAG,CAAKC,OAAO,oEAC1B,IAAI,CAACC,IAAI,CAAGF,GAAG,CACf,IAAI,CAACG,QAAQ,CAAGF,OAAO,CACzB,CAAC,uHAED,iBAAaG,IAAI,4JAAEC,MAAM,+CAAC,KAAK,CAAEC,IAAI,mCAC7BC,GAAG,gCAAQ,IAAI,CAACJ,QAAQ,MAAEE,MAAM,CAANA,MAAM,GACtC,GAAIC,IAAI,CAAE,CACR,GAAI,MAAOA,KAAI,GAAK,QAAQ,CAAE,CAC5BC,GAAG,CAACD,IAAI,CAAGA,IAAI,CACjB,CAAC,IACI,CACHC,GAAG,CAACD,IAAI,CAAGE,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC,CACjC,CACF,CAAC,sBACiBI,MAAK,CAAC,IAAI,CAACR,IAAI,CAAGE,IAAI,CAAEG,GAAG,CAAC,QAAxCI,GAAG,mBACNA,GAAG,CAACC,EAAE,0DACAD,GAAG,CAACE,IAAI,EAAE,0CAGVC,OAAO,CAACC,MAAM,iDAAYP,IAAI,CAACQ,OAAO,EAAG,8DAEnD,sGACC,mBAAW,CACT,MAAO,KAAI,CAACC,MAAM,CAAC,QAAQ,CAAE,KAAK,CAAC,CACrC,CAAC,uBACD,kBAAU,CACR,MAAO,KAAI,CAACA,MAAM,CAAC,WAAW,CAAE,KAAK,CAAC,CACxC,CAAC,yBACD,mBAAUC,MAAM,CAAE,CAChB,MAAO,KAAI,CAACD,MAAM,CAAC,WAAW,CAAE,OAAO,CAAEC,MAAM,CAAC,CAClD,CAAC,yBACD,mBAAUC,MAAM,CAAE,CAChB,MAAO,KAAI,CAACF,MAAM,CAAC,kBAAkB,CAAE,OAAO,CAAEE,MAAM,CAAC,CACzD,CAAC,uBACD,uBAAsB,IAAbC,KAAI,OAAJA,IAAI,CAAEC,IAAI,OAAJA,IAAI,CACjB,MAAO,KAAI,CAACJ,MAAM,CAAC,QAAQ,CAAE,MAAM,CAAE,CAACG,IAAI,CAAJA,IAAI,CAAEC,IAAI,CAAJA,IAAI,CAAC,CAAC,CACpD,CAAC,0BACD,oBAAWC,IAAI,CAAE,CACf,MAAO,KAAI,CAACL,MAAM,kBAAWK,IAAI,CAACC,GAAG,EAAI,QAAQ,CAAC,CACpD,CAAC,uBACD,iBAAQD,IAAI,CAAE,CACZ,MAAO,KAAI,CAACL,MAAM,kBAAWK,IAAI,CAACC,GAAG,WAAU,KAAK,CAAC,CACvD,CAAC,0BACD,oBAAWD,IAAI,CAAE,CACf,MAAO,KAAI,CAACL,MAAM,kBAAWK,IAAI,CAACC,GAAG,WAAU,QAAQ,CAAC,CAC1D,CAAC,oCACD,8BAAqBC,MAAM,CAAEC,OAAO,CAAE,CACpC,GAAIA,OAAO,CAAE,CACX,MAAO,KAAI,CAACR,MAAM,kBAAWO,MAAM,WAAU,KAAK,CAAC,CACrD,CAAC,IACI,CACH,MAAO,KAAI,CAACP,MAAM,kBAAWO,MAAM,WAAU,QAAQ,CAAC,CACxD,CACF,CAAC,mBAEL,GAAME,IAAG,CAAG,GAAI3B,IAAG,CAAE,CACjBC,GAAG,CAAE,6CAA6C,CAClDC,OAAO,CAAE,CACP0B,aAAa,CAAE,sCAAsC,CACrD,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CACF,cAAeD,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}